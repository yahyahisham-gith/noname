-- admin-hub-V1
-- VERSION: 2.0.2 (FE MASTER - RESTORED EVERYTHING)

-- [1] CLEANUP
if _G.HubRunning then 
    _G.HubStop = true 
    local old = game.CoreGui:FindFirstChild("AdminHubV1") or game.Players.LocalPlayer.PlayerGui:FindFirstChild("AdminHubV1")
    if old then old:Destroy() end
    task.wait(0.3) 
end
_G.HubRunning, _G.HubStop = true, false

local Player = game.Players.LocalPlayer
local Character = Player.Character or Player.CharacterAdded:Wait()
local UIS, RunService = game:GetService("UserInputService"), game:GetService("RunService")

-- [2] UI SETUP
local ScreenGui = Instance.new("ScreenGui")
pcall(function() ScreenGui.Parent = game:GetService("CoreGui") end)
if not ScreenGui.Parent then ScreenGui.Parent = Player.PlayerGui end
ScreenGui.Name = "AdminHubV1"

local DragFrame = Instance.new("Frame", ScreenGui)
DragFrame.Size = UDim2.new(0, 250, 0, 40); DragFrame.Position = UDim2.new(0.5, -125, 0.2, 0)
DragFrame.BackgroundColor3 = Color3.fromRGB(35, 35, 35); DragFrame.Active = true; DragFrame.Draggable = true 
Instance.new("UICorner", DragFrame)

local Title = Instance.new("TextLabel", DragFrame)
Title.Size = UDim2.new(1, 0, 1, 0); Title.Text = "MASTER HUB V2.0.2"; Title.TextColor3 = Color3.new(1,1,1)
Title.BackgroundTransparency = 1; Title.Font = Enum.Font.GothamBold

local Main = Instance.new("Frame", DragFrame)
Main.Size = UDim2.new(1, 0, 0, 500); Main.Position = UDim2.new(0, 0, 1, 5)
Main.BackgroundColor3 = Color3.fromRGB(20, 20, 20); Instance.new("UICorner", Main)

local Scroll = Instance.new("ScrollingFrame", Main)
Scroll.Size = UDim2.new(1, -10, 1, -10); Scroll.Position = UDim2.new(0, 5, 0, 5)
Scroll.BackgroundTransparency = 1; Scroll.CanvasSize = UDim2.new(0, 0, 11, 0); Scroll.ScrollBarThickness = 2
local UIList = Instance.new("UIListLayout", Scroll); UIList.Padding = UDim.new(0, 8); UIList.HorizontalAlignment = Enum.HorizontalAlignment.Center

local function NewBtn(text, color)
    local b = Instance.new("TextButton", Scroll)
    b.Size = UDim2.new(0.9, 0, 0, 35); b.Text = text; b.BackgroundColor3 = color; b.TextColor3 = Color3.new(1,1,1)
    Instance.new("UICorner", b); return b
end

-- --- MOVEMENT (FLY RESTORED) ---
local FlyBtn = NewBtn("FLY/NOCLIP: OFF", Color3.fromRGB(50, 50, 50))
FlyBtn.MouseButton1Click:Connect(function()
    _G.Flying = not _G.Flying
    FlyBtn.Text = _G.Flying and "FLY/NOCLIP: ON" or "FLY/NOCLIP: OFF"
    FlyBtn.BackgroundColor3 = _G.Flying and Color3.fromRGB(0, 180, 80) or Color3.fromRGB(50, 50, 50)
    if _G.Flying then
        task.spawn(function()
            local Root = Character:WaitForChild("HumanoidRootPart")
            local BV = Instance.new("BodyVelocity", Root); BV.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
            local BG = Instance.new("BodyGyro", Root); BG.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
            while _G.Flying and not _G.HubStop do
                BG.CFrame = workspace.CurrentCamera.CFrame
                local moveDir = Vector3.new(0,0,0)
                if UIS:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + workspace.CurrentCamera.CFrame.LookVector end
                if UIS:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - workspace.CurrentCamera.CFrame.LookVector end
                if UIS:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - workspace.CurrentCamera.CFrame.RightVector end
                if UIS:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + workspace.CurrentCamera.CFrame.RightVector end
                BV.Velocity = (moveDir.Magnitude > 0) and (moveDir.Unit * 85) or Vector3.new(0,0,0)
                for _, v in pairs(Character:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide = false end end
                RunService.Stepped:Wait()
            end
            BV:Destroy(); BG:Destroy()
            for _, v in pairs(Character:GetDescendants()) do if v:IsA("BasePart") then v.CanCollide = true end end
        end)
    end
end)

-- --- CHARACTER ---
NewBtn("FORCE R6 MODE", Color3.fromRGB(80, 80, 150)).MouseButton1Click:Connect(function()
    local Hum = Character:FindFirstChildOfClass("Humanoid")
    if Hum then Hum.RigType = Enum.HumanoidRigType.R6 end
end)

-- --- THE DOOR / CACTUS ---
NewBtn("SUMMON DESERT CACTUS", Color3.fromRGB(45, 120, 45)).MouseButton1Click:Connect(function()
    for _, v in pairs(game:GetDescendants()) do
        if v:IsA("Model") and v.Name:lower():find("cactus") then
            local c = v:Clone(); c.Parent = workspace
            c:MoveTo(Character.HumanoidRootPart.Position + (Character.HumanoidRootPart.CFrame.LookVector * 5))
            break
        end
    end
end)

-- --- GEARS ---
local CatIn = Instance.new("TextBox", Scroll)
CatIn.Size = UDim2.new(0.9, 0, 0, 35); CatIn.PlaceholderText = "Catalog Gear ID..."; CatIn.BackgroundColor3 = Color3.fromRGB(45, 45, 45); CatIn.TextColor3 = Color3.new(1,1,1); Instance.new("UICorner", CatIn)
NewBtn("GET CATALOG GEAR", Color3.fromRGB(0, 120, 0)).MouseButton1Click:Connect(function()
    local success, objects = pcall(function() return game:GetObjects("rbxassetid://" .. CatIn.Text) end)
    if success and objects[1] then 
        local tool = objects[1]
        tool.Parent = Player.Backpack
        for _, v in pairs(tool:GetDescendants()) do if v:IsA("LuaSourceContainer") then v.Disabled = false end end
    end
end)

local GameIn = Instance.new("TextBox", Scroll)
GameIn.Size = UDim2.new(0.9, 0, 0, 35); GameIn.PlaceholderText = "Game Tool Search..."; GameIn.BackgroundColor3 = Color3.fromRGB(45, 45, 45); GameIn.TextColor3 = Color3.new(1,1,1); Instance.new("UICorner", GameIn)
NewBtn("GET GAME GEAR", Color3.fromRGB(0, 80, 180)).MouseButton1Click:Connect(function()
    for _, v in pairs(game:GetDescendants()) do
        if v:IsA("Tool") and v.Name:lower():find(GameIn.Text:lower()) then v:Clone().Parent = Player.Backpack; break end
    end
end)

-- --- EXIT ---
NewBtn("FORCE CLOSE HUB (KILL)", Color3.fromRGB(170, 0, 0)).MouseButton1Click:Connect(function()
    _G.HubStop, _G.Flying, _G.HubRunning = true, false, false; ScreenGui:Destroy()
end)
