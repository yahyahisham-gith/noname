-- admin-hub-V1
-- Universal Admin Hub (Stable Fly + Direct Chat)
-- Compatibility: Xeno Executor

-- [1] KILLSWITCH
if _G.HubRunning then 
    _G.HubStop = true 
    local old = game.CoreGui:FindFirstChild("AdminHubV1") or game.Players.LocalPlayer.PlayerGui:FindFirstChild("AdminHubV1")
    if old then old:Destroy() end
    task.wait(0.3) 
end
_G.HubRunning = true
_G.HubStop = false
_G.Flying = false

local Player = game.Players.LocalPlayer
local Camera = workspace.CurrentCamera
local UIS = game:GetService("UserInputService")
local RunService = game:GetService("RunService")

-- [2] STABLE FLY
local function ToggleFly(btn)
    _G.Flying = not _G.Flying
    local Char = Player.Character
    if not Char then return end
    local Root = Char:WaitForChild("HumanoidRootPart")
    
    if _G.Flying then
        btn.Text = "FLY: ON"
        btn.BackgroundColor3 = Color3.fromRGB(0, 200, 100)
        local BV = Instance.new("BodyVelocity", Root)
        local BG = Instance.new("BodyGyro", Root)
        BV.MaxForce = Vector3.new(math.huge, math.huge, math.huge)
        BG.MaxTorque = Vector3.new(math.huge, math.huge, math.huge)
        
        task.spawn(function()
            while _G.Flying and not _G.HubStop and Char.Parent do
                local look, right, moveDir = Camera.CFrame.LookVector, Camera.CFrame.RightVector, Vector3.new(0,0,0)
                if UIS:IsKeyDown(Enum.KeyCode.W) then moveDir = moveDir + look end
                if UIS:IsKeyDown(Enum.KeyCode.S) then moveDir = moveDir - look end
                if UIS:IsKeyDown(Enum.KeyCode.A) then moveDir = moveDir - right end
                if UIS:IsKeyDown(Enum.KeyCode.D) then moveDir = moveDir + right end
                
                BG.CFrame = Camera.CFrame
                BV.Velocity = (moveDir.Magnitude > 0) and (moveDir.Unit * 70) or Vector3.new(0,0,0)
                
                -- Simple Noclip
                for _, v in pairs(Char:GetDescendants()) do
                    if v:IsA("BasePart") then v.CanCollide = false end
                end
                RunService.Stepped:Wait()
            end
            if BV then BV:Destroy() end if BG then BG:Destroy() end
        end)
    else
        btn.Text = "FLY: OFF"
        btn.BackgroundColor3 = Color3.fromRGB(0, 120, 200)
    end
end

-- [3] DIRECT CHAT BEYOND SUSPENSION
-- This sends the message directly to the server's chat remote
local function SendDirectChat(msg)
    local Remote = game:GetService("ReplicatedStorage"):FindFirstChild("DefaultChatSystemChatEvents")
    if Remote and Remote:FindFirstChild("SayMessageRequest") then
        Remote.SayMessageRequest:FireServer(msg, "All")
    else
        -- Fallback for newer TextChatService games
        local TextChannel = game:GetService("TextChatService"):FindFirstChild("TextChannels")
        if TextChannel and TextChannel:FindFirstChild("RBXGeneral") then
            TextChannel.RBXGeneral:SendAsync(msg)
        end
    end
end

-- [4] UI
local ScreenGui = Instance.new("ScreenGui")
pcall(function() ScreenGui.Parent = game:GetService("CoreGui") end)
if not ScreenGui.Parent then ScreenGui.Parent = Player.PlayerGui end
ScreenGui.Name = "AdminHubV1"

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.new(0, 200, 0, 280)
Main.Position = UDim2.new(0.5, -100, 0.4, -140)
Main.BackgroundColor3 = Color3.fromRGB(25, 25, 25)
Main.Active = true
Main.Draggable = true
Instance.new("UICorner", Main)

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1, 0, 0, 40)
Title.Text = "ADMIN HUB V1"
Title.TextColor3 = Color3.fromRGB(255, 255, 255)
Title.BackgroundTransparency = 1
Title.Font = Enum.Font.GothamBold

-- Chat Elements
local ChatInput = Instance.new("TextBox", Main)
ChatInput.Size = UDim2.new(0.9, 0, 0, 35)
ChatInput.Position = UDim2.new(0.05, 0, 0.2, 0)
ChatInput.PlaceholderText = "Type to chat..."
ChatInput.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
ChatInput.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", ChatInput)

local SendBtn = Instance.new("TextButton", Main)
SendBtn.Size = UDim2.new(0.9, 0, 0, 30)
SendBtn.Position = UDim2.new(0.05, 0, 0.35, 0)
SendBtn.Text = "SEND MESSAGE"
SendBtn.BackgroundColor3 = Color3.fromRGB(100, 0, 200)
SendBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
Instance.new("UICorner", SendBtn)
SendBtn.MouseButton1Click:Connect(function()
    if ChatInput.Text ~= "" then
        SendDirectChat(ChatInput.Text)
        ChatInput.Text = ""
    end
end)

-- Standard Buttons
local function CreateBtn(text, pos, color, func)
    local b = Instance.new("TextButton", Main)
    b.Size = UDim2.new(0.9, 0, 0, 35)
    b.Position = pos
    b.Text = text
    b.BackgroundColor3 = color
    b.TextColor3 = Color3.fromRGB(255, 255, 255)
    Instance.new("UICorner", b)
    b.MouseButton1Click:Connect(function() func(b) end)
end

CreateBtn("FLY: OFF", UDim2.new(0.05, 0, 0.55, 0), Color3.fromRGB(0, 120, 200), ToggleFly)
CreateBtn("SPEED 100", UDim2.new(0.05, 0, 0.7, 0), Color3.fromRGB(80, 80, 80), function()
    if Player.Character then Player.Character.Humanoid.WalkSpeed = 100 end
end)
CreateBtn("CLOSE", UDim2.new(0.05, 0, 0.85, 0), Color3.fromRGB(150, 0, 0), function()
    _G.HubStop = true
    _G.Flying = false
    ScreenGui:Destroy()
end)
